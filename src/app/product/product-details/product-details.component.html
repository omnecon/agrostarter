<div class="container" *ngIf="product;else other">
   <div class="row">
      <div class="col-4">
         <div class="lg-img-box">
            <slideshow [minHeight]="'200px'" [autoPlay]="true" [showArrows]="true" [imageUrls]="product.images" [lazyLoad]="product.images?.length > 1" [autoPlayWaitForLazyLoad]="true" *ngIf="product.images?.length >= 1" onError="this.imageUrls='assets/images/no_image_available.jpeg';" #imgSlider>
            </slideshow>
         </div>
         <br>
         <div *ngFor="let image of product.images;let i = index">
            <img [src]="image.url" class="sm-img-box1" onError="this.src='assets/images/no_image_available.jpeg';" style="width:22%" (click)="gotoProductImg(i)">
         </div>
      </div>
      <div class="col-8">
            <div class="row" [hidden]="!userLogin">
                  <div class="col-6">
                        <h3>{{product.title}}</h3>
                  </div>
                  <div class="col-6">
                      <button mat-raised-button color="accent" class="btn btn-lg" [disabled]="isWishlisted" (click)="addToWishlist()">Add to wishllist</button> 
                  </div>
            </div>         
         <p>
            {{product.text}}
         </p>
         <p>
            <strong>Location: {{product.productLocation}}</strong>
         </p>
         <p>
            <strong>Price: {{product.price | currency:'EUR':'symbol-narrow'}}</strong>
         </p>
         <p>
            <strong>Categories: </strong>
            <span *ngFor="let catgory of product.categories;let i= index">
               {{catgory.cat_text}}
               <span *ngIf="(i<(product.categories?.length-1))">,</span>
            </span>
         </p>
         <div class="row" [hidden]="!userLogin">
            <div class="col-6">
               <button mat-raised-button color="accent" class="btn btn-lg" (click)="scroll(offer)">Make an offers</button>
            </div>
            <div class="col-6">
               <button mat-raised-button color="accent" class="btn btn-lg" (click)="scroll(question)">Ask a questions</button>
            </div>
         </div>
      </div>

   </div>
   <br>
   <div class="row">
      <div class="col-6">
         <h3>Offers</h3>
         <hr>
         <span *ngIf="offersBy?.length>0">
            <div *ngFor="let user of offersBy">
               <img [src]="user.photoURL" (error)="'assets/profile/profile-images.jpg'" class="sm-img-avatar" />
               <p style="line-height: 50px; font-size: 14px">
                  {{user.firstName}} {{user.lastName}} has made an offer
               </p>
            </div>
         </span>
         <form [formGroup]="offersForm" (ngSubmit)="addOffer()" #offer [hidden]="!userLogin">
            <mat-form-field class="input-full-width">
               <input matInput type="text" id="desc" formControlName="desc" required placeholder="Offer text">
            </mat-form-field>
            <div *ngIf="formOfferErrors.desc" class="help is-danger">
               {{ formOfferErrors.desc }}
            </div>
            <mat-form-field class="input-full-width">
               <input matInput type="number" id="price1" formControlName="price" required placeholder="Offer Price">
            </mat-form-field>
            <div *ngIf="formOfferErrors.price" class="help is-danger">
               {{ formOfferErrors.price }}
            </div>
            <button mat-raised-button color="accent" type="submit" class="btn btn-sm" [disabled]="!offersForm.valid">Add</button>
         </form>
      </div>
      <div class="col-6">
         <h3>Questions</h3>
         <hr>
         <span *ngIf="questionsBy?.length>0">
            <div *ngFor="let user of questionsBy">
               <img [src]="user.photoURL" (error)="'assets/profile/profile-images.jpg'" class="sm-img-avatar" />
               <p style="line-height: 50px; font-size: 14px">
                  <span style="color:#1c90f3">{{user.firstName}} {{user.lastName}}: </span>
                  {{user.question}}
                  <br> {{user.ans}}
               </p>
            </div>
         </span>
         <form [formGroup]="questionsForm" (ngSubmit)="addQuestion()" #question [hidden]="!userLogin">
            <mat-form-field class="input-full-width">
               <input matInput type="text" id="que1" formControlName="que" required placeholder="Question">
            </mat-form-field>
            <button mat-raised-button color="accent" type="submit" class="btn btn-sm" [disabled]="!questionsForm.valid">Add</button>
            <div *ngIf="formErrors.que" class="help is-danger">
               {{ formErrors.que }}
            </div>
         </form>
      </div>
   </div>
</div>
<ng-template #other>
      <loading-spinner></loading-spinner>
</ng-template>